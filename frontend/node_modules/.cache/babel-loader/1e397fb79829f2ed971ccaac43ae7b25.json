{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stuartcasarotto/Documents/family-website/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/stuartcasarotto/Documents/family-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import validate from'validate.js';import firebase from'firebase/app';import'firebase/firestore';export var saveRSVP=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var name,foodChoice,comment,popupFunctions,showNetworkActivity,hideNetworkActivity,showAlert,validatorConstraints,validationResponse,valuesArray,firstError,firstErrorMessage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:name=data.name,foodChoice=data.foodChoice,comment=data.comment,popupFunctions=data.popupFunctions;showNetworkActivity=popupFunctions.showNetworkActivity,hideNetworkActivity=popupFunctions.hideNetworkActivity,showAlert=popupFunctions.showAlert;validatorConstraints={name:{presence:{allowEmpty:false}},foodChoice:{presence:{allowEmpty:false}}};validationResponse=validate(data,validatorConstraints);if(!validationResponse){_context.next=10;break;}valuesArray=Object.values(validationResponse);firstError=valuesArray[0];firstErrorMessage=firstError[0];showAlert({title:'Error',message:firstErrorMessage});throw new Error(firstErrorMessage);case 10:_context.prev=10;showNetworkActivity('Submitting RSVP...');_context.next=14;return firebase.firestore().collection('WeddingRSVPs').add({dateCreated:new Date().getTime(),name:name,foodChoice:foodChoice.value,comment:comment,status:0});case 14:hideNetworkActivity();showAlert({title:'Thank You!',message:'Your RSVP has been submitted.'});return _context.abrupt(\"return\");case 19:_context.prev=19;_context.t0=_context[\"catch\"](10);console.log(_context.t0);showAlert({title:'Error',message:'Error submitting your RSVP.'});throw new Error(_context.t0);case 24:case\"end\":return _context.stop();}}},_callee,null,[[10,19]]);}));return function saveRSVP(_x){return _ref.apply(this,arguments);};}();export var saveMessage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var name,message,showMessage,popupFunctions,showNetworkActivity,hideNetworkActivity,showAlert,validatorConstraints,validationResponse,valuesArray,firstError,firstErrorMessage;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:name=data.name,message=data.message,showMessage=data.showMessage,popupFunctions=data.popupFunctions;showNetworkActivity=popupFunctions.showNetworkActivity,hideNetworkActivity=popupFunctions.hideNetworkActivity,showAlert=popupFunctions.showAlert;validatorConstraints={name:{presence:{allowEmpty:false}},message:{presence:{allowEmpty:false}},showMessage:{presence:{allowEmpty:false}}};validationResponse=validate(data,validatorConstraints);if(!validationResponse){_context2.next=10;break;}valuesArray=Object.values(validationResponse);firstError=valuesArray[0];firstErrorMessage=firstError[0];showAlert({title:'Error',message:firstErrorMessage});throw new Error(firstErrorMessage);case 10:_context2.prev=10;showNetworkActivity('Submitting Message...');_context2.next=14;return firebase.firestore().collection('WeddingMessages').add({dateCreated:new Date().getTime(),createdBy:name,message:message,showMessage:showMessage==='Displayed publicly on the website.'});case 14:hideNetworkActivity();showAlert({title:'Thank You!',message:'Your Message has been submitted.'});return _context2.abrupt(\"return\");case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](10);console.log(_context2.t0);showAlert({title:'Error',message:'Error submitting your message.'});throw new Error(_context2.t0);case 24:case\"end\":return _context2.stop();}}},_callee2,null,[[10,19]]);}));return function saveMessage(_x2){return _ref2.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/stuartcasarotto/Documents/family-website/src/pages/front/RSVP/requests.ts"],"names":["validate","firebase","saveRSVP","data","name","foodChoice","comment","popupFunctions","showNetworkActivity","hideNetworkActivity","showAlert","validatorConstraints","presence","allowEmpty","validationResponse","valuesArray","Object","values","firstError","firstErrorMessage","title","message","Error","firestore","collection","add","dateCreated","Date","getTime","value","status","console","log","saveMessage","showMessage","createdBy"],"mappings":"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","sourcesContent":["import validate from 'validate.js'\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport { useTEPopupsFunctions } from 'react-tec'\n\ninterface RSVPData {\n\tname: string\n\tfoodChoice?: { value: string; label: string }\n\tcomment: string\n\tpopupFunctions: useTEPopupsFunctions\n}\nexport const saveRSVP = async (data: RSVPData) => {\n\tconst { name, foodChoice, comment, popupFunctions } = data\n\tconst { showNetworkActivity, hideNetworkActivity, showAlert } = popupFunctions\n\n\tconst validatorConstraints: { [key: string]: any } = {\n\t\tname: {\n\t\t\tpresence: {\n\t\t\t\tallowEmpty: false,\n\t\t\t},\n\t\t},\n\t\tfoodChoice: {\n\t\t\tpresence: {\n\t\t\t\tallowEmpty: false,\n\t\t\t},\n\t\t},\n\t}\n\tconst validationResponse = validate(data, validatorConstraints)\n\tif (validationResponse) {\n\t\tconst valuesArray: any[][] = Object.values(validationResponse)\n\t\tconst firstError: any[] = valuesArray[0]\n\t\tconst firstErrorMessage: string = firstError[0]\n\t\tshowAlert({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: firstErrorMessage,\n\t\t})\n\t\tthrow new Error(firstErrorMessage)\n\t}\n\n\ttry {\n\t\tshowNetworkActivity('Submitting RSVP...')\n\t\tawait firebase\n\t\t\t.firestore()\n\t\t\t.collection('WeddingRSVPs')\n\t\t\t.add({\n\t\t\t\tdateCreated: new Date().getTime(),\n\t\t\t\tname,\n\t\t\t\tfoodChoice: foodChoice!.value,\n\t\t\t\tcomment,\n\t\t\t\tstatus: 0,\n\t\t\t})\n\n\t\thideNetworkActivity()\n\t\tshowAlert({\n\t\t\ttitle: 'Thank You!',\n\t\t\tmessage: 'Your RSVP has been submitted.',\n\t\t})\n\t\treturn\n\t} catch (e) {\n\t\tconsole.log(e)\n\t\tshowAlert({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: 'Error submitting your RSVP.',\n\t\t})\n\t\tthrow new Error(e)\n\t}\n}\n\ninterface MessageData {\n\tname: string\n\tmessage?: string\n\tshowMessage: string\n\tpopupFunctions: useTEPopupsFunctions\n}\nexport const saveMessage = async (data: MessageData) => {\n\tconst { name, message, showMessage, popupFunctions } = data\n\tconst { showNetworkActivity, hideNetworkActivity, showAlert } = popupFunctions\n\n\tconst validatorConstraints: { [key: string]: any } = {\n\t\tname: {\n\t\t\tpresence: {\n\t\t\t\tallowEmpty: false,\n\t\t\t},\n\t\t},\n\t\tmessage: {\n\t\t\tpresence: {\n\t\t\t\tallowEmpty: false,\n\t\t\t},\n\t\t},\n\t\tshowMessage: {\n\t\t\tpresence: {\n\t\t\t\tallowEmpty: false,\n\t\t\t},\n\t\t},\n\t}\n\tconst validationResponse = validate(data, validatorConstraints)\n\tif (validationResponse) {\n\t\tconst valuesArray: any[][] = Object.values(validationResponse)\n\t\tconst firstError: any[] = valuesArray[0]\n\t\tconst firstErrorMessage: string = firstError[0]\n\t\tshowAlert({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: firstErrorMessage,\n\t\t})\n\t\tthrow new Error(firstErrorMessage)\n\t}\n\n\ttry {\n\t\tshowNetworkActivity('Submitting Message...')\n\t\tawait firebase\n\t\t\t.firestore()\n\t\t\t.collection('WeddingMessages')\n\t\t\t.add({\n\t\t\t\tdateCreated: new Date().getTime(),\n\t\t\t\tcreatedBy: name,\n\t\t\t\tmessage,\n\t\t\t\tshowMessage: showMessage === 'Displayed publicly on the website.',\n\t\t\t})\n\n\t\thideNetworkActivity()\n\t\tshowAlert({\n\t\t\ttitle: 'Thank You!',\n\t\t\tmessage: 'Your Message has been submitted.',\n\t\t})\n\t\treturn\n\t} catch (e) {\n\t\tconsole.log(e)\n\t\tshowAlert({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: 'Error submitting your message.',\n\t\t})\n\t\tthrow new Error(e)\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}