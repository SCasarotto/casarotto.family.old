{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stuartcasarotto/Documents/family-website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/stuartcasarotto/Documents/family-website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/stuartcasarotto/Documents/family-website/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{TEPopupForm,TEInputRow,useTEPopups,TEDatetimeRow,TETextareaRow,TESegmentedGroup}from'react-tec';import{TEPopupTitle}from'components';import{saveMessage}from'./requests';export var EditMessagePopup=function EditMessagePopup(props){var visible=props.visible,onClose=props.onClose,onSubmit=props.onSubmit,editMessage=props.editMessage;var popupFunctions=useTEPopups();var _useState=useState(),_useState2=_slicedToArray(_useState,2),dateCreated=_useState2[0],setDateCreated=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),createdBy=_useState4[0],setCreatedBy=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),showMessage=_useState8[0],setShowMessage=_useState8[1];useEffect(function(){if(editMessage){var _dateCreated=editMessage.dateCreated,_createdBy=editMessage.createdBy,_message=editMessage.message,_showMessage=editMessage.showMessage;setDateCreated(_dateCreated?new Date(_dateCreated):undefined);setCreatedBy(_createdBy);setMessage(_message);setShowMessage(_showMessage?'Displayed publicly on the website.':'Sent privately to the couple.');}else{setDateCreated(undefined);setCreatedBy('');setMessage('');setShowMessage('');}},[editMessage]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;data={uid:editMessage.uid,message:message,showMessage:showMessage,popupFunctions:popupFunctions};_context.next=5;return saveMessage(data);case 5:setDateCreated(undefined);setCreatedBy('');setMessage('');setShowMessage('Yes');onSubmit();_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(TEPopupForm,{visible:visible,onClose:onClose,onSubmit:handleSubmit,onSubmitTitle:\"Save Message\"},/*#__PURE__*/React.createElement(TEPopupTitle,null,\"Edit Message\"),/*#__PURE__*/React.createElement(TEDatetimeRow,{labelForKey:\"editDateCreated\",title:\"Date Created\",value:dateCreated,onChange:function onChange(){},required:true,disabled:true}),/*#__PURE__*/React.createElement(TEInputRow,{labelForKey:\"editCreatedBy\",title:\"Name\",value:createdBy,onChange:function onChange(){},required:true,disabled:true}),/*#__PURE__*/React.createElement(TETextareaRow,{labelForKey:\"editMessage\",title:\"Message\",value:message,onChange:function onChange(e){return setMessage(e.target.value);},required:true}),/*#__PURE__*/React.createElement(TESegmentedGroup,{labelForKey:\"editPublic\",title:\"I would like my message:\",buttonArray:['Displayed publicly on the website.','Sent privately to the couple.'],checkedValue:showMessage,onChange:function onChange(e){return setShowMessage(e.target.value);},required:true}));};","map":{"version":3,"sources":["/Users/stuartcasarotto/Documents/family-website/frontend/src/pages/admin/Messages/EditMessagePopup/EditMessagePopup.tsx"],"names":["React","useState","useEffect","TEPopupForm","TEInputRow","useTEPopups","TEDatetimeRow","TETextareaRow","TESegmentedGroup","TEPopupTitle","saveMessage","EditMessagePopup","props","visible","onClose","onSubmit","editMessage","popupFunctions","dateCreated","setDateCreated","createdBy","setCreatedBy","message","setMessage","showMessage","setShowMessage","Date","undefined","handleSubmit","e","preventDefault","data","uid","console","log","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {\n\tTEPopupForm,\n\tTEInputRow,\n\tuseTEPopups,\n\tTEDatetimeRow,\n\tTETextareaRow,\n\tTESegmentedGroup,\n} from 'react-tec'\n\nimport { TEPopupTitle } from 'components'\nimport { Message } from 'interfaces'\n\nimport { saveMessage } from './requests'\n\ninterface Props {\n\tvisible: boolean\n\tonClose(): void\n\tonSubmit(): void\n\teditMessage?: Message\n}\nexport const EditMessagePopup = (props: Props) => {\n\tconst { visible, onClose, onSubmit, editMessage } = props\n\n\tconst popupFunctions = useTEPopups()\n\tconst [dateCreated, setDateCreated] = useState<Date>()\n\tconst [createdBy, setCreatedBy] = useState('')\n\tconst [message, setMessage] = useState('')\n\tconst [showMessage, setShowMessage] = useState('')\n\n\tuseEffect(() => {\n\t\tif (editMessage) {\n\t\t\tconst { dateCreated, createdBy, message, showMessage } = editMessage\n\n\t\t\tsetDateCreated(dateCreated ? new Date(dateCreated) : undefined)\n\t\t\tsetCreatedBy(createdBy)\n\t\t\tsetMessage(message)\n\t\t\tsetShowMessage(\n\t\t\t\tshowMessage\n\t\t\t\t\t? 'Displayed publicly on the website.'\n\t\t\t\t\t: 'Sent privately to the couple.',\n\t\t\t)\n\t\t} else {\n\t\t\tsetDateCreated(undefined)\n\t\t\tsetCreatedBy('')\n\t\t\tsetMessage('')\n\t\t\tsetShowMessage('')\n\t\t}\n\t}, [editMessage])\n\n\tconst handleSubmit = async (e: React.FormEvent<HTMLElement>) => {\n\t\te.preventDefault()\n\t\ttry {\n\t\t\tconst data = {\n\t\t\t\tuid: editMessage!.uid,\n\t\t\t\tmessage,\n\t\t\t\tshowMessage,\n\t\t\t\tpopupFunctions,\n\t\t\t}\n\n\t\t\tawait saveMessage(data)\n\t\t\tsetDateCreated(undefined)\n\t\t\tsetCreatedBy('')\n\t\t\tsetMessage('')\n\t\t\tsetShowMessage('Yes')\n\t\t\tonSubmit()\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t}\n\n\treturn (\n\t\t<TEPopupForm\n\t\t\tvisible={visible}\n\t\t\tonClose={onClose}\n\t\t\tonSubmit={handleSubmit}\n\t\t\tonSubmitTitle='Save Message'\n\t\t>\n\t\t\t<TEPopupTitle>Edit Message</TEPopupTitle>\n\t\t\t<TEDatetimeRow\n\t\t\t\tlabelForKey='editDateCreated'\n\t\t\t\ttitle='Date Created'\n\t\t\t\tvalue={dateCreated}\n\t\t\t\tonChange={() => {}}\n\t\t\t\trequired\n\t\t\t\tdisabled\n\t\t\t/>\n\t\t\t<TEInputRow\n\t\t\t\tlabelForKey='editCreatedBy'\n\t\t\t\ttitle='Name'\n\t\t\t\tvalue={createdBy}\n\t\t\t\tonChange={() => {}}\n\t\t\t\trequired\n\t\t\t\tdisabled\n\t\t\t/>\n\t\t\t<TETextareaRow\n\t\t\t\tlabelForKey='editMessage'\n\t\t\t\ttitle='Message'\n\t\t\t\tvalue={message}\n\t\t\t\tonChange={(e) => setMessage(e.target.value)}\n\t\t\t\trequired\n\t\t\t/>\n\t\t\t<TESegmentedGroup\n\t\t\t\tlabelForKey='editPublic'\n\t\t\t\ttitle='I would like my message:'\n\t\t\t\tbuttonArray={[\n\t\t\t\t\t'Displayed publicly on the website.',\n\t\t\t\t\t'Sent privately to the couple.',\n\t\t\t\t]}\n\t\t\t\tcheckedValue={showMessage}\n\t\t\t\tonChange={(e) => setShowMessage(e.target.value)}\n\t\t\t\trequired\n\t\t\t/>\n\t\t</TEPopupForm>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}