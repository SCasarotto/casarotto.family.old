{"ast":null,"code":"import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { useState, useEffect } from 'react';\nimport { collectionToDataArray } from 'helpers';\nexport const useMessages = () => {\n  const [messageArray, setMessageArray] = useState([]);\n  const [messagesLoaded, setMessagesLoaded] = useState(false);\n  useEffect(() => {\n    const messagesWatcher = firebase.firestore().collection('WeddingMessages').onSnapshot(snapshot => {\n      setMessageArray(collectionToDataArray(snapshot));\n      setMessagesLoaded(true);\n    }, e => {\n      console.log(e);\n      setMessageArray([]);\n      setMessagesLoaded(false);\n    });\n    return () => {\n      messagesWatcher();\n      setMessageArray([]);\n      setMessagesLoaded(false);\n    };\n  }, []);\n  return {\n    messageArray,\n    messagesLoaded\n  };\n};","map":{"version":3,"sources":["/Users/stuartcasarotto/Documents/family-website/src/pages/admin/Messages/hooks.ts"],"names":["firebase","useState","useEffect","collectionToDataArray","useMessages","messageArray","setMessageArray","messagesLoaded","setMessagesLoaded","messagesWatcher","firestore","collection","onSnapshot","snapshot","e","console","log"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,SAASC,qBAAT,QAAsC,SAAtC;AAEA,OAAO,MAAMC,WAAW,GAAG,MAAM;AAChC,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCL,QAAQ,CAAY,EAAZ,CAAhD;AACA,QAAM,CAACM,cAAD,EAAiBC,iBAAjB,IAAsCP,QAAQ,CAAC,KAAD,CAApD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACf,UAAMO,eAAe,GAAGT,QAAQ,CAC9BU,SADsB,GAEtBC,UAFsB,CAEX,iBAFW,EAGtBC,UAHsB,CAIrBC,QAAD,IAAc;AACbP,MAAAA,eAAe,CAACH,qBAAqB,CAACU,QAAD,CAAtB,CAAf;AACAL,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACA,KAPqB,EAQrBM,CAAD,IAAO;AACNC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACAR,MAAAA,eAAe,CAAC,EAAD,CAAf;AACAE,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACA,KAZqB,CAAxB;AAeA,WAAO,MAAM;AACZC,MAAAA,eAAe;AACfH,MAAAA,eAAe,CAAC,EAAD,CAAf;AACAE,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACA,KAJD;AAKA,GArBQ,EAqBN,EArBM,CAAT;AAuBA,SAAO;AAAEH,IAAAA,YAAF;AAAgBE,IAAAA;AAAhB,GAAP;AACA,CA5BM","sourcesContent":["import firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport { useState, useEffect } from 'react'\nimport { Message } from 'interfaces'\nimport { collectionToDataArray } from 'helpers'\n\nexport const useMessages = () => {\n\tconst [messageArray, setMessageArray] = useState<Message[]>([])\n\tconst [messagesLoaded, setMessagesLoaded] = useState(false)\n\n\tuseEffect(() => {\n\t\tconst messagesWatcher = firebase\n\t\t\t.firestore()\n\t\t\t.collection('WeddingMessages')\n\t\t\t.onSnapshot(\n\t\t\t\t(snapshot) => {\n\t\t\t\t\tsetMessageArray(collectionToDataArray(snapshot))\n\t\t\t\t\tsetMessagesLoaded(true)\n\t\t\t\t},\n\t\t\t\t(e) => {\n\t\t\t\t\tconsole.log(e)\n\t\t\t\t\tsetMessageArray([])\n\t\t\t\t\tsetMessagesLoaded(false)\n\t\t\t\t},\n\t\t\t)\n\n\t\treturn () => {\n\t\t\tmessagesWatcher()\n\t\t\tsetMessageArray([])\n\t\t\tsetMessagesLoaded(false)\n\t\t}\n\t}, [])\n\n\treturn { messageArray, messagesLoaded }\n}\n"]},"metadata":{},"sourceType":"module"}