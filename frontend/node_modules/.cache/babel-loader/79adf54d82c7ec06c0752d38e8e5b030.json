{"ast":null,"code":"import validate from 'validate.js';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nexport const saveRSVP = async data => {\n  const {\n    name,\n    foodChoice,\n    comment,\n    showMessage,\n    popupFunctions\n  } = data;\n  const {\n    showNetworkActivity,\n    hideNetworkActivity,\n    showAlert\n  } = popupFunctions;\n  const validatorConstraints = {\n    name: {\n      presence: {\n        allowEmpty: false\n      }\n    },\n    foodChoice: {\n      presence: {\n        allowEmpty: false\n      }\n    },\n    showMessage: {\n      presence: {\n        allowEmpty: false\n      }\n    }\n  };\n  const validationResponse = validate(data, validatorConstraints);\n\n  if (validationResponse) {\n    const valuesArray = Object.values(validationResponse);\n    const firstError = valuesArray[0];\n    const firstErrorMessage = firstError[0];\n    showAlert({\n      title: 'Error',\n      message: firstErrorMessage\n    });\n    throw new Error(firstErrorMessage);\n  }\n\n  try {\n    showNetworkActivity('Submitting RSVP...');\n    await firebase.firestore().collection('WeddingRSVPs').add({\n      dateCreated: new Date().getTime(),\n      name,\n      foodChoice: foodChoice.value,\n      comment,\n      showMessage: showMessage === 'Displayed publicly on the website.',\n      status: 0\n    });\n    hideNetworkActivity();\n    showAlert({\n      title: 'Thank You!',\n      message: 'Your RSVP has been submitted.'\n    });\n    return;\n  } catch (e) {\n    console.log(e);\n    showAlert({\n      title: 'Error',\n      message: 'Error submitting your RSVP.'\n    });\n    throw new Error(e);\n  }\n};\nexport const saveMessage = async data => {\n  const {\n    name,\n    message,\n    popupFunctions\n  } = data;\n  const {\n    showNetworkActivity,\n    hideNetworkActivity,\n    showAlert\n  } = popupFunctions;\n  const validatorConstraints = {\n    name: {\n      presence: {\n        allowEmpty: false\n      }\n    },\n    message: {\n      presence: {\n        allowEmpty: false\n      }\n    }\n  };\n  const validationResponse = validate(data, validatorConstraints);\n\n  if (validationResponse) {\n    const valuesArray = Object.values(validationResponse);\n    const firstError = valuesArray[0];\n    const firstErrorMessage = firstError[0];\n    showAlert({\n      title: 'Error',\n      message: firstErrorMessage\n    });\n    throw new Error(firstErrorMessage);\n  }\n\n  try {\n    showNetworkActivity('Submitting Message...');\n    await firebase.firestore().collection('WeddingMessages').add({\n      dateCreated: new Date().getTime(),\n      createdBy: name,\n      message\n    });\n    hideNetworkActivity();\n    showAlert({\n      title: 'Thank You!',\n      message: 'Your Message has been submitted.'\n    });\n    return;\n  } catch (e) {\n    console.log(e);\n    showAlert({\n      title: 'Error',\n      message: 'Error submitting your message.'\n    });\n    throw new Error(e);\n  }\n};","map":{"version":3,"sources":["/Users/stuartcasarotto/Documents/family-website/src/pages/front/RSVP/requests.ts"],"names":["validate","firebase","saveRSVP","data","name","foodChoice","comment","showMessage","popupFunctions","showNetworkActivity","hideNetworkActivity","showAlert","validatorConstraints","presence","allowEmpty","validationResponse","valuesArray","Object","values","firstError","firstErrorMessage","title","message","Error","firestore","collection","add","dateCreated","Date","getTime","value","status","e","console","log","saveMessage","createdBy"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,aAArB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;AAUA,OAAO,MAAMC,QAAQ,GAAG,MAAOC,IAAP,IAA0B;AACjD,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,UAAR;AAAoBC,IAAAA,OAApB;AAA6BC,IAAAA,WAA7B;AAA0CC,IAAAA;AAA1C,MAA6DL,IAAnE;AACA,QAAM;AAAEM,IAAAA,mBAAF;AAAuBC,IAAAA,mBAAvB;AAA4CC,IAAAA;AAA5C,MAA0DH,cAAhE;AAEA,QAAMI,oBAA4C,GAAG;AACpDR,IAAAA,IAAI,EAAE;AACLS,MAAAA,QAAQ,EAAE;AACTC,QAAAA,UAAU,EAAE;AADH;AADL,KAD8C;AAMpDT,IAAAA,UAAU,EAAE;AACXQ,MAAAA,QAAQ,EAAE;AACTC,QAAAA,UAAU,EAAE;AADH;AADC,KANwC;AAWpDP,IAAAA,WAAW,EAAE;AACZM,MAAAA,QAAQ,EAAE;AACTC,QAAAA,UAAU,EAAE;AADH;AADE;AAXuC,GAArD;AAiBA,QAAMC,kBAAkB,GAAGf,QAAQ,CAACG,IAAD,EAAOS,oBAAP,CAAnC;;AACA,MAAIG,kBAAJ,EAAwB;AACvB,UAAMC,WAAoB,GAAGC,MAAM,CAACC,MAAP,CAAcH,kBAAd,CAA7B;AACA,UAAMI,UAAiB,GAAGH,WAAW,CAAC,CAAD,CAArC;AACA,UAAMI,iBAAyB,GAAGD,UAAU,CAAC,CAAD,CAA5C;AACAR,IAAAA,SAAS,CAAC;AACTU,MAAAA,KAAK,EAAE,OADE;AAETC,MAAAA,OAAO,EAAEF;AAFA,KAAD,CAAT;AAIA,UAAM,IAAIG,KAAJ,CAAUH,iBAAV,CAAN;AACA;;AAED,MAAI;AACHX,IAAAA,mBAAmB,CAAC,oBAAD,CAAnB;AACA,UAAMR,QAAQ,CACZuB,SADI,GAEJC,UAFI,CAEO,cAFP,EAGJC,GAHI,CAGA;AACJC,MAAAA,WAAW,EAAE,IAAIC,IAAJ,GAAWC,OAAX,EADT;AAEJzB,MAAAA,IAFI;AAGJC,MAAAA,UAAU,EAAEA,UAAU,CAAEyB,KAHpB;AAIJxB,MAAAA,OAJI;AAKJC,MAAAA,WAAW,EAAEA,WAAW,KAAK,oCALzB;AAMJwB,MAAAA,MAAM,EAAE;AANJ,KAHA,CAAN;AAYArB,IAAAA,mBAAmB;AACnBC,IAAAA,SAAS,CAAC;AACTU,MAAAA,KAAK,EAAE,YADE;AAETC,MAAAA,OAAO,EAAE;AAFA,KAAD,CAAT;AAIA;AACA,GApBD,CAoBE,OAAOU,CAAP,EAAU;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACArB,IAAAA,SAAS,CAAC;AACTU,MAAAA,KAAK,EAAE,OADE;AAETC,MAAAA,OAAO,EAAE;AAFA,KAAD,CAAT;AAIA,UAAM,IAAIC,KAAJ,CAAUS,CAAV,CAAN;AACA;AACD,CA7DM;AAoEP,OAAO,MAAMG,WAAW,GAAG,MAAOhC,IAAP,IAA6B;AACvD,QAAM;AAAEC,IAAAA,IAAF;AAAQkB,IAAAA,OAAR;AAAiBd,IAAAA;AAAjB,MAAoCL,IAA1C;AACA,QAAM;AAAEM,IAAAA,mBAAF;AAAuBC,IAAAA,mBAAvB;AAA4CC,IAAAA;AAA5C,MAA0DH,cAAhE;AAEA,QAAMI,oBAA4C,GAAG;AACpDR,IAAAA,IAAI,EAAE;AACLS,MAAAA,QAAQ,EAAE;AACTC,QAAAA,UAAU,EAAE;AADH;AADL,KAD8C;AAMpDQ,IAAAA,OAAO,EAAE;AACRT,MAAAA,QAAQ,EAAE;AACTC,QAAAA,UAAU,EAAE;AADH;AADF;AAN2C,GAArD;AAYA,QAAMC,kBAAkB,GAAGf,QAAQ,CAACG,IAAD,EAAOS,oBAAP,CAAnC;;AACA,MAAIG,kBAAJ,EAAwB;AACvB,UAAMC,WAAoB,GAAGC,MAAM,CAACC,MAAP,CAAcH,kBAAd,CAA7B;AACA,UAAMI,UAAiB,GAAGH,WAAW,CAAC,CAAD,CAArC;AACA,UAAMI,iBAAyB,GAAGD,UAAU,CAAC,CAAD,CAA5C;AACAR,IAAAA,SAAS,CAAC;AACTU,MAAAA,KAAK,EAAE,OADE;AAETC,MAAAA,OAAO,EAAEF;AAFA,KAAD,CAAT;AAIA,UAAM,IAAIG,KAAJ,CAAUH,iBAAV,CAAN;AACA;;AAED,MAAI;AACHX,IAAAA,mBAAmB,CAAC,uBAAD,CAAnB;AACA,UAAMR,QAAQ,CACZuB,SADI,GAEJC,UAFI,CAEO,iBAFP,EAGJC,GAHI,CAGA;AAAEC,MAAAA,WAAW,EAAE,IAAIC,IAAJ,GAAWC,OAAX,EAAf;AAAqCO,MAAAA,SAAS,EAAEhC,IAAhD;AAAsDkB,MAAAA;AAAtD,KAHA,CAAN;AAKAZ,IAAAA,mBAAmB;AACnBC,IAAAA,SAAS,CAAC;AACTU,MAAAA,KAAK,EAAE,YADE;AAETC,MAAAA,OAAO,EAAE;AAFA,KAAD,CAAT;AAIA;AACA,GAbD,CAaE,OAAOU,CAAP,EAAU;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACArB,IAAAA,SAAS,CAAC;AACTU,MAAAA,KAAK,EAAE,OADE;AAETC,MAAAA,OAAO,EAAE;AAFA,KAAD,CAAT;AAIA,UAAM,IAAIC,KAAJ,CAAUS,CAAV,CAAN;AACA;AACD,CAjDM","sourcesContent":["import validate from 'validate.js'\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport { useTEPopupsFunctions } from 'react-tec'\n\ninterface RSVPData {\n\tname: string\n\tfoodChoice?: { value: string; label: string }\n\tcomment: string\n\tshowMessage: string\n\tpopupFunctions: useTEPopupsFunctions\n}\nexport const saveRSVP = async (data: RSVPData) => {\n\tconst { name, foodChoice, comment, showMessage, popupFunctions } = data\n\tconst { showNetworkActivity, hideNetworkActivity, showAlert } = popupFunctions\n\n\tconst validatorConstraints: { [key: string]: any } = {\n\t\tname: {\n\t\t\tpresence: {\n\t\t\t\tallowEmpty: false,\n\t\t\t},\n\t\t},\n\t\tfoodChoice: {\n\t\t\tpresence: {\n\t\t\t\tallowEmpty: false,\n\t\t\t},\n\t\t},\n\t\tshowMessage: {\n\t\t\tpresence: {\n\t\t\t\tallowEmpty: false,\n\t\t\t},\n\t\t},\n\t}\n\tconst validationResponse = validate(data, validatorConstraints)\n\tif (validationResponse) {\n\t\tconst valuesArray: any[][] = Object.values(validationResponse)\n\t\tconst firstError: any[] = valuesArray[0]\n\t\tconst firstErrorMessage: string = firstError[0]\n\t\tshowAlert({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: firstErrorMessage,\n\t\t})\n\t\tthrow new Error(firstErrorMessage)\n\t}\n\n\ttry {\n\t\tshowNetworkActivity('Submitting RSVP...')\n\t\tawait firebase\n\t\t\t.firestore()\n\t\t\t.collection('WeddingRSVPs')\n\t\t\t.add({\n\t\t\t\tdateCreated: new Date().getTime(),\n\t\t\t\tname,\n\t\t\t\tfoodChoice: foodChoice!.value,\n\t\t\t\tcomment,\n\t\t\t\tshowMessage: showMessage === 'Displayed publicly on the website.',\n\t\t\t\tstatus: 0,\n\t\t\t})\n\n\t\thideNetworkActivity()\n\t\tshowAlert({\n\t\t\ttitle: 'Thank You!',\n\t\t\tmessage: 'Your RSVP has been submitted.',\n\t\t})\n\t\treturn\n\t} catch (e) {\n\t\tconsole.log(e)\n\t\tshowAlert({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: 'Error submitting your RSVP.',\n\t\t})\n\t\tthrow new Error(e)\n\t}\n}\n\ninterface MessageData {\n\tname: string\n\tmessage?: string\n\tpopupFunctions: useTEPopupsFunctions\n}\nexport const saveMessage = async (data: MessageData) => {\n\tconst { name, message, popupFunctions } = data\n\tconst { showNetworkActivity, hideNetworkActivity, showAlert } = popupFunctions\n\n\tconst validatorConstraints: { [key: string]: any } = {\n\t\tname: {\n\t\t\tpresence: {\n\t\t\t\tallowEmpty: false,\n\t\t\t},\n\t\t},\n\t\tmessage: {\n\t\t\tpresence: {\n\t\t\t\tallowEmpty: false,\n\t\t\t},\n\t\t},\n\t}\n\tconst validationResponse = validate(data, validatorConstraints)\n\tif (validationResponse) {\n\t\tconst valuesArray: any[][] = Object.values(validationResponse)\n\t\tconst firstError: any[] = valuesArray[0]\n\t\tconst firstErrorMessage: string = firstError[0]\n\t\tshowAlert({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: firstErrorMessage,\n\t\t})\n\t\tthrow new Error(firstErrorMessage)\n\t}\n\n\ttry {\n\t\tshowNetworkActivity('Submitting Message...')\n\t\tawait firebase\n\t\t\t.firestore()\n\t\t\t.collection('WeddingMessages')\n\t\t\t.add({ dateCreated: new Date().getTime(), createdBy: name, message })\n\n\t\thideNetworkActivity()\n\t\tshowAlert({\n\t\t\ttitle: 'Thank You!',\n\t\t\tmessage: 'Your Message has been submitted.',\n\t\t})\n\t\treturn\n\t} catch (e) {\n\t\tconsole.log(e)\n\t\tshowAlert({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: 'Error submitting your message.',\n\t\t})\n\t\tthrow new Error(e)\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}