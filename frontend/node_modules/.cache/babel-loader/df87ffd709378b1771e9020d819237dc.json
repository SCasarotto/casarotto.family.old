{"ast":null,"code":"import _slicedToArray from\"/Users/stuartcasarotto/Documents/family-website/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import firebase from'firebase/app';import'firebase/firestore';import{useState,useEffect}from'react';import{collectionToDataArray}from'helpers';export var useMessages=function useMessages(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messageArray=_useState2[0],setMessageArray=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),messagesLoaded=_useState4[0],setMessagesLoaded=_useState4[1];useEffect(function(){var messagesWatcher=firebase.firestore().collection('WeddingMessages').onSnapshot(function(snapshot){setMessageArray(collectionToDataArray(snapshot));setMessagesLoaded(true);},function(e){console.log(e);setMessageArray([]);setMessagesLoaded(false);});return function(){messagesWatcher();setMessageArray([]);setMessagesLoaded(false);};},[]);return{messageArray:messageArray,messagesLoaded:messagesLoaded};};","map":{"version":3,"sources":["/Users/stuartcasarotto/Documents/family-website/src/pages/admin/Messages/hooks.ts"],"names":["firebase","useState","useEffect","collectionToDataArray","useMessages","messageArray","setMessageArray","messagesLoaded","setMessagesLoaded","messagesWatcher","firestore","collection","onSnapshot","snapshot","e","console","log"],"mappings":"kIAAA,MAAOA,CAAAA,QAAP,KAAqB,cAArB,CACA,MAAO,oBAAP,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CAEA,OAASC,qBAAT,KAAsC,SAAtC,CAEA,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,eACQH,QAAQ,CAAY,EAAZ,CADhB,wCACzBI,YADyB,eACXC,eADW,8BAEYL,QAAQ,CAAC,KAAD,CAFpB,yCAEzBM,cAFyB,eAETC,iBAFS,eAIhCN,SAAS,CAAC,UAAM,CACf,GAAMO,CAAAA,eAAe,CAAGT,QAAQ,CAC9BU,SADsB,GAEtBC,UAFsB,CAEX,iBAFW,EAGtBC,UAHsB,CAItB,SAACC,QAAD,CAAc,CACbP,eAAe,CAACH,qBAAqB,CAACU,QAAD,CAAtB,CAAf,CACAL,iBAAiB,CAAC,IAAD,CAAjB,CACA,CAPqB,CAQtB,SAACM,CAAD,CAAO,CACNC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACAR,eAAe,CAAC,EAAD,CAAf,CACAE,iBAAiB,CAAC,KAAD,CAAjB,CACA,CAZqB,CAAxB,CAeA,MAAO,WAAM,CACZC,eAAe,GACfH,eAAe,CAAC,EAAD,CAAf,CACAE,iBAAiB,CAAC,KAAD,CAAjB,CACA,CAJD,CAKA,CArBQ,CAqBN,EArBM,CAAT,CAuBA,MAAO,CAAEH,YAAY,CAAZA,YAAF,CAAgBE,cAAc,CAAdA,cAAhB,CAAP,CACA,CA5BM","sourcesContent":["import firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport { useState, useEffect } from 'react'\nimport { Message } from 'interfaces'\nimport { collectionToDataArray } from 'helpers'\n\nexport const useMessages = () => {\n\tconst [messageArray, setMessageArray] = useState<Message[]>([])\n\tconst [messagesLoaded, setMessagesLoaded] = useState(false)\n\n\tuseEffect(() => {\n\t\tconst messagesWatcher = firebase\n\t\t\t.firestore()\n\t\t\t.collection('WeddingMessages')\n\t\t\t.onSnapshot(\n\t\t\t\t(snapshot) => {\n\t\t\t\t\tsetMessageArray(collectionToDataArray(snapshot))\n\t\t\t\t\tsetMessagesLoaded(true)\n\t\t\t\t},\n\t\t\t\t(e) => {\n\t\t\t\t\tconsole.log(e)\n\t\t\t\t\tsetMessageArray([])\n\t\t\t\t\tsetMessagesLoaded(false)\n\t\t\t\t},\n\t\t\t)\n\n\t\treturn () => {\n\t\t\tmessagesWatcher()\n\t\t\tsetMessageArray([])\n\t\t\tsetMessagesLoaded(false)\n\t\t}\n\t}, [])\n\n\treturn { messageArray, messagesLoaded }\n}\n"]},"metadata":{},"sourceType":"module"}